<!-- Campaign Manager Dashboard - Modern Sleek Design -->
<div class="campaign-dashboard" [class.dark-theme]="isDarkMode">
  
  <!-- Header Section: Total campaigns count + details + Add New Campaign button -->
  <header class="dashboard-header sticky-top">
    <div class="header-content">
      <div class="header-main">
        <div class="brand-section">
          <h1 class="dashboard-title">
            <i class="pi pi-chart-line title-icon"></i>
            Campaign Manager
          </h1>
          <div class="campaign-summary">
            <span class="campaign-count">{{totalCampaigns}} Active</span>
            <span class="divider">|</span>
            <span class="total-reach">{{formatNumber(totalReach)}} Reach</span>
            <span class="divider">|</span>
            <span class="total-spend">₹{{formatNumber(totalSpend)}} Spent</span>
            <div class="live-indicator" *ngIf="isLiveUpdatesActive">
              <span class="live-dot"></span>
              Live
            </div>
          </div>
        </div>
        
        <div class="header-controls">
          <div class="control-group">
            <p-dropdown 
              [options]="dateRangeOptions" 
              [(ngModel)]="selectedDateRange"
              (onChange)="onDateRangeChange()"
              placeholder="Date Range"
              optionLabel="label"
              optionValue="value"
              [style]="{'min-width': '140px'}"
              styleClass="control-dropdown">
            </p-dropdown>
            
            <p-dropdown 
              [options]="channelOptions" 
              [(ngModel)]="selectedChannel"
              (onChange)="onChannelChange()"
              placeholder="All Channels"
              optionLabel="label"
              optionValue="value"
              [style]="{'min-width': '130px'}"
              styleClass="control-dropdown">
            </p-dropdown>
          </div>
          
          <div class="action-buttons">
            <p-button 
              [icon]="isLiveUpdatesActive ? 'pi pi-pause' : 'pi pi-play'"
              styleClass="p-button-sm"
              [class]="isLiveUpdatesActive ? 'p-button-success p-button-outlined' : 'p-button-secondary p-button-outlined'"
              pTooltip="Toggle Live Updates"
              (onClick)="toggleLiveUpdates()">
            </p-button>
            
            <p-button 
              icon="pi pi-cog" 
              styleClass="p-button-secondary p-button-outlined p-button-sm"
              pTooltip="Settings"
              (onClick)="openSettings()">
            </p-button>
            
            <p-button 
              label="New Campaign" 
              icon="pi pi-plus"
              severity="primary"
              size="small"
              (onClick)="onCreateCampaign()">
            </p-button>
          </div>
        </div>
      </div>

      <!-- Advanced Notification System -->
      <div class="notification-system">
        <p-messages 
          *ngIf="showLiveNotification"
          [value]="[{severity: 'success', summary: 'Update', detail: liveNotification}]"
          [enableService]="false"
          [closable]="true">
        </p-messages>
      </div>
    </div>
  </header>

  <!-- Row 6: Festival Timeline (auto-detected Indian holidays) -->
  <section class="analytics-row festival-row" *ngIf="dataAge >= 45">
    <div class="section-card festival-card full-width">
      <div class="card-header">
        <div class="header-left">
          <h3 class="section-title">Festival Timeline & Seasonal Insights</h3>
          <p-badge 
            value="Auto-detected" 
            severity="warning"
            [style]="{'margin-left': '0.5rem'}">
          </p-badge>
        </div>
        <div class="header-controls">
          <p-dropdown 
            [options]="festivalRegions" 
            [(ngModel)]="selectedRegion"
            placeholder="All India"
            optionLabel="label"
            optionValue="value"
            styleClass="control-dropdown-sm">
          </p-dropdown>
        </div>
      </div>
      <app-festival-calendar 
        [autoDetect]="true"
        [region]="selectedRegion"
        [showCampaignCorrelation]="true">
      </app-festival-calendar>
    </div>
  </section>

  <!-- Progressive Features Section - Customer Win-back (30+ days) -->
  <section class="analytics-row winback-row" *ngIf="dataAge >= 30">
    <div class="grid grid-nogutter">
      <div class="col-12 lg:col-6">
        <div class="section-card winback-card">
          <div class="card-header">
            <h3 class="section-title">Customer Win-back Opportunities</h3>
            <p-badge 
              value="{{inactiveCustomers}} Identified" 
              severity="info">
            </p-badge>
          </div>
          <app-inactive-customers 
            [analysisDepth]="dataAge"
            [showWinbackSuggestions]="true">
          </app-inactive-customers>
        </div>
      </div>
      <div class="col-12 lg:col-6">
        <div class="section-card ai-winback-card">
          <div class="card-header">
            <h3 class="section-title">AI Win-back Strategies</h3>
            <i class="pi pi-sparkles" style="color: #FFD700;"></i>
          </div>
          <app-ai-suggestions 
            [contextType]="'customer-winback'"
            [customerData]="inactiveCustomers">
          </app-ai-suggestions>
        </div>
      </div>
    </div>
  </section>

  <!-- Advanced Analytics Section (60+ days) -->
  <section class="analytics-row advanced-row" *ngIf="dataAge >= 60">
    <div class="section-card advanced-analytics-card full-width">
      <div class="card-header">
        <div class="header-left">
          <h3 class="section-title">Advanced Analytics & Predictive Intelligence</h3>
          <p-badge 
            value="60+ Days Data" 
            severity="success">
          </p-badge>
        </div>
        <div class="header-controls">
          <p-dropdown 
            [options]="analyticsViews" 
            [(ngModel)]="selectedAnalyticsView"
            placeholder="Select View"
            optionLabel="label"
            optionValue="value"
            styleClass="control-dropdown-sm">
          </p-dropdown>
        </div>
      </div>
      
      <div class="advanced-analytics-content">
        <div class="grid grid-nogutter">
          <div class="col-12 lg:col-4">
            <div class="analytics-widget trend-analysis">
              <h4>Trend Analysis</h4>
              <div class="trend-metrics">
                <div class="metric-card">
                  <span class="metric-title">Growth Rate</span>
                  <span class="metric-value positive">+23.5%</span>
                </div>
                <div class="metric-card">
                  <span class="metric-title">Engagement Trend</span>
                  <span class="metric-value positive">+12.8%</span>
                </div>
                <div class="metric-card">
                  <span class="metric-title">ROI Improvement</span>
                  <span class="metric-value positive">+18.3%</span>
                </div>
              </div>
            </div>
          </div>
          <div class="col-12 lg:col-4">
            <div class="analytics-widget predictive-insights">
              <h4>Predictive Insights</h4>
              <div class="prediction-list">
                <div class="prediction-item">
                  <i class="pi pi-arrow-up text-green-500"></i>
                  <span>Expected 15% growth next month</span>
                </div>
                <div class="prediction-item">
                  <i class="pi pi-exclamation-triangle text-orange-500"></i>
                  <span>WhatsApp costs may increase 8%</span>
                </div>
                <div class="prediction-item">
                  <i class="pi pi-star text-blue-500"></i>
                  <span>Optimal send time: 2-4 PM</span>
                </div>
              </div>
            </div>
          </div>
          <div class="col-12 lg:col-4">
            <div class="analytics-widget clv-analysis">
              <h4>Customer Lifetime Value</h4>
              <div class="clv-summary">
                <div class="clv-metric">
                  <span class="clv-label">Avg. CLV</span>
                  <span class="clv-value">₹2,450</span>
                </div>
                <div class="clv-metric">
                  <span class="clv-label">High-Value Customers</span>
                  <span class="clv-value">{{highValueCustomers}}</span>
                </div>
                <div class="clv-metric">
                  <span class="clv-label">Churn Risk</span>
                  <span class="clv-value risk">{{churnRiskCustomers}}</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Feature Availability Status Banner -->
  <section class="feature-status-banner" *ngIf="getSectionAvailabilityStatus().length > 0">
    <div class="status-card">
      <div class="status-header">
        <i class="pi pi-star-fill status-icon"></i>
        <h4>Advanced Features Unlocked</h4>
        <span class="data-badge">{{dataAge}} days data</span>
      </div>
      <div class="feature-tags">
        <p-tag 
          *ngFor="let feature of getSectionAvailabilityStatus()" 
          [value]="feature" 
          severity="info"
          [style]="{'margin': '0.25rem'}">
        </p-tag>
      </div>
    </div>
  </section>

  <!-- Dashboard Summary Footer -->
  <footer class="dashboard-summary">
    <div class="summary-container">
      <div class="summary-stats">
        <div class="stat-group">
          <div class="stat-item">
            <span class="stat-number">{{totalCampaigns}}</span>
            <span class="stat-label">Campaigns</span>
          </div>
          <div class="stat-item">
            <span class="stat-number">{{formatNumber(totalReach)}}</span>
            <span class="stat-label">Total Reach</span>
          </div>
          <div class="stat-item">
            <span class="stat-number">₹{{formatNumber(totalSpend)}}</span>
            <span class="stat-label">Total Spend</span>
          </div>
          <div class="stat-item">
            <span class="stat-number">{{dataAge}}d</span>
            <span class="stat-label">Data History</span>
          </div>
        </div>
        <div class="summary-description">
          <p>{{getDataAgeDescription()}}</p>
        </div>
      </div>
    </div>
  </footer>

  <!-- Floating Quick Actions -->
  <div class="floating-actions">
    <p-button 
      icon="pi pi-plus"
      styleClass="p-button-rounded p-button-success p-button-lg floating-btn"
      pTooltip="Quick Actions"
      tooltipPosition="left"
      (onClick)="onCreateCampaign()">
    </p-button>
  </div>

</div>