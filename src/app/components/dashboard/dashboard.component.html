<!-- Modern Campaign Manager Dashboard -->
<div class="dashboard-container">
  <!-- Enhanced Header Section with Live Status -->
  <div class="dashboard-header flex align-items-center justify-content-between mb-6 p-4 bg-white border-round-xl shadow-2">
    <div>
      <div class="flex align-items-center gap-3 mb-2">
        <h1 class="text-3xl font-bold text-900 m-0">Campaign Analytics Dashboard</h1>
        <p-tag 
          *ngIf="isLiveUpdatesActive" 
          value="LIVE" 
          severity="success" 
          class="animate-pulse">
        </p-tag>
      </div>
      <p class="text-lg text-600 m-0 mb-2">Multi-Channel Campaign Performance â€¢ Real-time tracking across SMS, WhatsApp, Email, Push & RCS</p>
      <div class="flex align-items-center gap-4 text-sm text-500">
        <span><i class="pi pi-chart-line"></i> {{getActiveFeatureCount()}} Active Sections</span>
        <span><i class="pi pi-database"></i> {{getDataAgeDescription()}}</span>
        <span *ngIf="getSectionAvailabilityStatus().length > 0"><i class="pi pi-star"></i> {{getSectionAvailabilityStatus().length}} Advanced Features</span>
      </div>
    </div>
    <div class="flex align-items-center gap-3">
      <p-dropdown 
        [options]="channelOptions" 
        [(ngModel)]="selectedChannel"
        (onChange)="onChannelChange()"
        optionLabel="label"
        optionValue="value"
        placeholder="All Channels"
        styleClass="w-auto">
      </p-dropdown>
      <p-dropdown 
        [options]="dateRangeOptions" 
        [(ngModel)]="selectedDateRange"
        (onChange)="onDateRangeChange()"
        optionLabel="label"
        optionValue="value"
        styleClass="w-auto">
      </p-dropdown>
      <p-button 
        [label]="isLiveUpdatesActive ? 'Live Updates ON' : 'Live Updates OFF'"
        [icon]="isLiveUpdatesActive ? 'pi pi-pause' : 'pi pi-play'"
        [styleClass]="isLiveUpdatesActive ? 'p-button-text p-button-success' : 'p-button-text p-button-secondary'"
        (onClick)="toggleLiveUpdates()">
      </p-button>
      <p-button 
        label="New Campaign" 
        icon="pi pi-plus"
        styleClass="p-button-primary"
        (onClick)="onCreateCampaign()">
      </p-button>
    </div>
  </div>

  <!-- Live Notification Banner -->
  <div 
    *ngIf="showLiveNotification" 
    class="live-notification bg-green-50 border-green-200 border-1 border-round-lg p-3 mb-4 flex align-items-center gap-3 animate-slideInDown">
    <i class="pi pi-check-circle text-green-600"></i>
    <span class="text-green-800 font-medium">{{liveNotification}}</span>
  </div>

  <!-- Executive Summary - Enhanced KPI Cards -->
  <div class="mb-6">
    <app-kpi-cards></app-kpi-cards>
  </div>

  <!-- Live Campaign Notifications (Always visible for real-time updates) -->
  <div class="mb-6">
    <app-campaign-notifications></app-campaign-notifications>
  </div>

  <!-- Data-Age Based Feature Availability Banner -->
  <div *ngIf="getSectionAvailabilityStatus().length > 0" class="feature-availability-banner mb-6">
    <p-panel 
      header="Advanced Features Available" 
      styleClass="bg-blue-50 border-blue-200">
      <div class="flex align-items-center gap-4">
        <i class="pi pi-star text-blue-600 text-2xl"></i>
        <div>
          <p class="m-0 mb-2 font-semibold text-blue-900">{{dataAge}} days of data unlocks:</p>
          <div class="flex flex-wrap gap-2">
            <p-tag 
              *ngFor="let feature of getSectionAvailabilityStatus()" 
              [value]="feature" 
              severity="info" 
              class="text-xs">
            </p-tag>
          </div>
        </div>
      </div>
    </p-panel>
  </div>

  <!-- Main Dashboard Grid Layout - Fixed Responsive Design -->
  <div class="grid" style="margin-left: -0.5rem; margin-right: -0.5rem;">
    <!-- Left Column - Performance Analytics -->
    <div class="col-12 lg:col-4" style="padding-left: 0.5rem; padding-right: 0.5rem; margin-bottom: 2rem;">
      <div style="display: flex; flex-direction: column; gap: 1.5rem;">
        <app-channel-performance></app-channel-performance>
        <app-heat-map></app-heat-map>
        <app-journey-orchestration *ngIf="dataAge >= 30"></app-journey-orchestration>
      </div>
    </div>

    <!-- Center Column - Campaign Monitoring -->
    <div class="col-12 lg:col-4" style="padding-left: 0.5rem; padding-right: 0.5rem; margin-bottom: 2rem;">
      <div style="display: flex; flex-direction: column; gap: 1.5rem;">
        <app-campaign-monitoring></app-campaign-monitoring>
        <app-budget-calculator></app-budget-calculator>
        <app-bsp-comparison></app-bsp-comparison>
      </div>
    </div>

    <!-- Right Column - AI Insights -->
    <div class="col-12 lg:col-4" style="padding-left: 0.5rem; padding-right: 0.5rem; margin-bottom: 2rem;">
      <div style="display: flex; flex-direction: column; gap: 1.5rem;">
        <app-ai-suggestions></app-ai-suggestions>
        <app-inactive-customers *ngIf="dataAge >= 30"></app-inactive-customers>
        <app-festival-calendar *ngIf="dataAge >= 45"></app-festival-calendar>
        
        <!-- Advanced Analytics Preview -->
        <div *ngIf="dataAge >= 60">
          <p-panel header="Advanced Analytics Suite">
            <div class="text-center p-3">
              <i class="pi pi-chart-bar text-4xl text-purple-600 mb-3"></i>
              <h4 class="text-purple-900 mb-2">Predictive Intelligence</h4>
              <p class="text-600 mb-3 text-sm">Advanced analytics available with 60+ days data</p>
              <p-button 
                label="Open Advanced Analytics" 
                icon="pi pi-external-link" 
                styleClass="p-button-sm p-button-outlined">
              </p-button>
            </div>
          </p-panel>
        </div>
      </div>
    </div>
  </div>

  <!-- Footer Statistics - Enhanced with Data Age Indicators -->
  <div class="dashboard-footer mt-6 p-4 bg-gradient-to-r from-blue-50 to-purple-50 border-round-lg">
    <div class="grid text-center">
      <div class="col-6 md:col-3">
        <div class="text-2xl font-bold text-900">{{totalCampaigns}}</div>
        <div class="text-sm text-600">Total Campaigns</div>
      </div>
      <div class="col-6 md:col-3">
        <div class="text-2xl font-bold text-green-600">{{totalReach | number}}</div>
        <div class="text-sm text-600">Total Reach</div>
      </div>
      <div class="col-6 md:col-3">
        <div class="text-2xl font-bold text-blue-600">${{totalSpend | number}}</div>
        <div class="text-sm text-600">Total Spend</div>
      </div>
      <div class="col-6 md:col-3">
        <div class="text-2xl font-bold text-purple-600">{{dataAge}} days</div>
        <div class="text-sm text-600">Data History</div>
        <div class="text-xs text-500 mt-1">{{getDataAgeDescription()}}</div>
      </div>
    </div>
  </div>

  <!-- Quick Actions Menu -->
  <div class="quick-actions-menu fixed bottom-4 right-4">
    <p-button 
      icon="pi pi-plus"
      styleClass="p-button-primary p-button-lg border-round-3"
      [style]="{'width': '60px', 'height': '60px'}"
      pTooltip="Quick Actions"
      tooltipPosition="left"
      (onClick)="onCreateCampaign()">
    </p-button>
  </div>
</div>